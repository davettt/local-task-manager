<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Local Task Manager</title>
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <div class="container">
      <!-- Active Task Section (conditional) -->
      <div id="active-task-section" class="active-task-section hidden">
        <div class="active-header">‚ñ∏ ACTIVE TASK</div>
        <div id="active-task-title" class="active-task-title">
          No active task
        </div>
        <div id="active-task-details" class="active-task-details hidden">
          <div id="active-task-meta" class="active-task-meta"></div>
          <div
            id="active-task-extended-details"
            class="active-task-extended-details"
          ></div>
          <div id="active-task-links" class="active-task-links"></div>
        </div>
        <div id="timer-display" class="timer-display">00:00:00</div>
        <div class="action-buttons">
          <button id="edit-active-btn" class="stop-btn">‚óá EDIT</button>
          <button id="stop-btn" class="stop-btn">‚è∏ STOP</button>
          <button id="complete-btn" class="complete-btn">‚úì DONE</button>
        </div>
      </div>

      <!-- Header Section -->
      <div class="header-section">
        <input
          type="text"
          id="search-input"
          class="search-input"
          placeholder="üîç Search tasks..."
        />
        <div id="streak-display" class="streak-display"></div>
        <button id="add-task-btn" class="add-button">+ NEW TASK</button>
      </div>

      <!-- Daily Checklist Section -->
      <div class="daily-checklist-section">
        <div class="daily-checklist-header" id="daily-checklist-toggle">
          üìã Daily Routine
        </div>
        <div class="daily-checklist-content hidden" id="daily-checklist-list">
          <label class="checklist-item">
            <input
              type="checkbox"
              class="checklist-checkbox"
              data-item="calendar"
            />
            üìÖ Calendar
          </label>
          <label class="checklist-item">
            <input
              type="checkbox"
              class="checklist-checkbox"
              data-item="asana"
            />
            ‚úì Asana (ok2build, EPD roadmap)
          </label>
          <label class="checklist-item">
            <input
              type="checkbox"
              class="checklist-checkbox"
              data-item="email"
            />
            ‚úâÔ∏è Email
          </label>
          <label class="checklist-item">
            <input
              type="checkbox"
              class="checklist-checkbox"
              data-item="slack-dms"
            />
            üí¨ Slack DMs & threads
          </label>
          <label class="checklist-item">
            <input
              type="checkbox"
              class="checklist-checkbox"
              data-item="slack-channels"
            />
            üì¢ Slack channels & enablement docs
          </label>
        </div>
      </div>

      <!-- Task List Section -->
      <div class="task-list-section">
        <div id="task-list" class="task-list">
          <div class="empty-state">
            No tasks yet. Create one to get started!
          </div>
        </div>
      </div>

      <!-- Completed Section -->
      <div class="archive-section">
        <div class="archive-header">
          <div id="archive-toggle" style="flex: 1; cursor: pointer">
            ‚úì Completed
            <span id="archive-count" class="archive-count"></span>
          </div>
          <button
            id="clean-archive-btn"
            class="clean-archive-btn"
            title="Move completed tasks to archive files"
          >
            üßπ CLEAN
          </button>
        </div>
        <div class="archive-content hidden" id="archive-list"></div>
      </div>
    </div>

    <!-- Task Modal -->
    <div id="task-modal" class="modal hidden">
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="modal-title">Add New Task</h3>
          <button class="close-btn" id="modal-close">&times;</button>
        </div>
        <form id="task-form">
          <div class="form-group">
            <label for="description">Description *</label>
            <textarea
              id="description"
              required
              placeholder="Describe your task..."
            ></textarea>
          </div>
          <div class="form-group">
            <label for="due-date">Due Date</label>
            <input type="date" id="due-date" />
          </div>
          <div class="form-group">
            <label for="due-time">Due Time</label>
            <input type="time" id="due-time" />
          </div>
          <div class="form-group">
            <label for="priority">Priority</label>
            <select id="priority">
              <option value="low">Low</option>
              <option value="medium" selected>Medium</option>
              <option value="high">High</option>
            </select>
          </div>
          <div class="form-group">
            <label for="links">Links (comma-separated)</label>
            <input
              type="text"
              id="links"
              placeholder="https://example.com, https://another.com"
            />
          </div>
          <div class="form-group">
            <label for="details">Details (optional)</label>
            <textarea
              id="details"
              placeholder="Add more detailed notes or instructions for this task..."
            ></textarea>
          </div>
          <div class="form-group">
            <label for="recurring">Recurring</label>
            <select id="recurring">
              <option value="">None</option>
              <option value="daily">Daily</option>
              <option value="weekly">Weekly</option>
            </select>
          </div>
          <div class="form-group">
            <label for="working-days-only">
              <input type="checkbox" id="working-days-only" disabled />
              Weekdays only (skip weekends)
            </label>
          </div>
          <div class="form-group">
            <label for="is-appointment">
              <input type="checkbox" id="is-appointment" />
              Calendar Appointment (time-sensitive)
            </label>
          </div>
          <div class="form-group">
            <label for="reminder-minutes">Reminder Before (minutes)</label>
            <select id="reminder-minutes" disabled>
              <option value="15">15 minutes</option>
              <option value="30" selected>30 minutes</option>
              <option value="60">1 hour</option>
              <option value="120">2 hours</option>
              <option value="1440">1 day</option>
            </select>
          </div>
          <div class="form-actions">
            <button type="submit" class="save-btn">Save Task</button>
            <button type="button" class="cancel-btn" id="modal-cancel">
              Cancel
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Completed Tasks Cleanup Modal -->
    <div id="cleanup-modal" class="modal hidden">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Clean Completed Tasks</h3>
          <button class="close-btn" id="cleanup-modal-close">&times;</button>
        </div>
        <div style="padding: 12px">
          <p style="color: #839496; margin-bottom: 8px; font-size: 12px">
            Move completed tasks to archive files before a selected date.
          </p>
          <div class="form-group">
            <label for="cleanup-date">Move tasks completed before:</label>
            <input type="date" id="cleanup-date" />
          </div>
          <div
            style="
              color: #586e75;
              font-size: 11px;
              margin-bottom: 8px;
              padding: 6px;
              background-color: #073642;
              border-left: 2px solid #586e75;
            "
          >
            üíæ Tasks will be saved to archive files in local_data/. No data will
            be lost.
          </div>
          <div style="display: flex; gap: 6px; justify-content: flex-end">
            <button id="cleanup-cancel-btn" class="cancel-btn">Cancel</button>
            <button id="cleanup-confirm-btn" class="save-btn">
              Move to Archive Files
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script src="js/timer.js"></script>
    <script src="js/taskManager.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/appointmentReminder.js"></script>
    <script src="js/gamification.js"></script>
    <script src="js/app.js"></script>
  </body>
</html>
